---
import Layout from '../../../layouts/Layout.astro';
import { getLangFromUrl, useTranslations } from '../../../i18n/utils';
import { ui } from '../../../i18n/ui';

export function getStaticPaths() {
  return Object.keys(ui).map(lang => ({ params: { lang } }));
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout title="Cursor Setup Guide">
  <div class="docs-page">
    <div class="container">
      <nav class="breadcrumb">
        <a href={`/${lang}/docs/`}>{t('docs.title')}</a> / <span>Cursor</span>
      </nav>

      <h1>⚡ Cursor Setup Guide</h1>
      
      <section class="docs-section">
        <h2>Installation</h2>
        <p>Initialize Ralphy-Spec with Cursor support:</p>
        <pre><code>cd your-project
ralphy-spec init --tools cursor</code></pre>
        
        <p>Or select Cursor during interactive setup:</p>
        <pre><code>ralphy-spec init</code></pre>
      </section>

      <section class="docs-section">
        <h2>What Gets Installed</h2>
        <p>Ralphy-Spec creates the following files for Cursor:</p>
        <pre><code>.cursor/
└── prompts/
    ├── ralphy-plan.md
    ├── ralphy-implement.md
    ├── ralphy-validate.md
    └── ralphy-archive.md</code></pre>
      </section>

      <section class="docs-section">
        <h2>Using the Commands</h2>
        <p>In Cursor, use the slash commands to trigger each workflow phase:</p>
        
        <div class="command-card">
          <h3><code>/ralphy-plan</code></h3>
          <p>Create an OpenSpec change proposal from your requirements or PRD.</p>
          <p class="example">Example: "Create an OpenSpec proposal for adding user authentication"</p>
        </div>

        <div class="command-card">
          <h3><code>/ralphy-implement</code></h3>
          <p>Implement tasks from the current OpenSpec change. Works with Ralph loop for iterative execution.</p>
          <p class="example">Example: "Implement the add-auth change"</p>
        </div>

        <div class="command-card">
          <h3><code>/ralphy-validate</code></h3>
          <p>Run tests and validate that acceptance criteria are met.</p>
          <p class="example">Example: "Validate the implementation meets all acceptance criteria"</p>
        </div>

        <div class="command-card">
          <h3><code>/ralphy-archive</code></h3>
          <p>Archive the completed change and merge specs back to source of truth.</p>
          <p class="example">Example: "Archive the add-auth change"</p>
        </div>
      </section>

      <section class="docs-section">
        <h2>Tips for Cursor</h2>
        <ul>
          <li>Restart Cursor after running <code>ralphy-spec init</code> to load the new slash commands</li>
          <li>Use <code>@openspec/</code> to reference spec files in your prompts</li>
          <li>The commands work best in Agent mode for multi-step tasks</li>
        </ul>
      </section>

      <div class="nav-links">
        <a href={`/${lang}/docs/`}>← Back to Documentation</a>
        <a href={`/${lang}/docs/opencode`}>OpenCode Guide →</a>
      </div>
    </div>
  </div>
</Layout>

<style>
  .docs-page {
    padding: 4rem 0;
  }

  .breadcrumb {
    color: var(--color-text-secondary);
    margin-bottom: 2rem;
    font-size: 0.875rem;
  }

  .breadcrumb a {
    color: var(--color-text-secondary);
  }

  .breadcrumb a:hover {
    color: var(--color-primary);
  }

  .docs-page h1 {
    margin-bottom: 2rem;
  }

  .docs-section {
    margin-bottom: 3rem;
  }

  .docs-section h2 {
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--color-border);
  }

  .docs-section ul {
    margin-left: 1.5rem;
  }

  .docs-section li {
    margin-bottom: 0.5rem;
  }

  .command-card {
    background-color: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    padding: 1.5rem;
    margin-bottom: 1rem;
  }

  .command-card h3 {
    margin-bottom: 0.5rem;
  }

  .command-card p {
    margin-bottom: 0.5rem;
  }

  .command-card .example {
    font-size: 0.875rem;
    color: var(--color-text-secondary);
    font-style: italic;
    margin-bottom: 0;
  }

  .nav-links {
    display: flex;
    justify-content: space-between;
    padding-top: 2rem;
    border-top: 1px solid var(--color-border);
  }
</style>
